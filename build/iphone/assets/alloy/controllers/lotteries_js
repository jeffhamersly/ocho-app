function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(o,r){var n=[],a="https://app.lotteryegg.com/lotteries",s=Ti.Network.createHTTPClient({onload:function(){json=JSON.parse(this.responseText);var a=0;if(o)if("USA"!=o||r){i.back.setText("< back"),i.back.addEventListener("singletap",function(){i.table.setData(n),e()}),Alloy.Globals.Location="lottery";for(var s=json.length,a=0,l=0;s>l;l++){var c=json[l].name,d=json[l].config,u=json[l].country,h=json[l].region;if(u==o){a++;var _=a%2?"#f4f6f5":"#ffffff",f=Ti.UI.createTableViewRow({backgroundColor:_,width:Ti.UI.FILL});i.addClass(f,"countryRow");var p=Ti.UI.createView({layout:"horizontal",left:"10%",width:"90%"}),g=Ti.UI.createLabel({text:a});if(i.addClass(g,"countRow"),f.add(g),r){if(h==r){var v=Ti.UI.createLabel({text:c,layout:d});i.addClass(v,"countryList"),p.add(v),f.add(p),n.push(f)}}else{var v=Ti.UI.createLabel({text:c,layout:d});i.addClass(v,"countryList"),p.add(v),f.add(p),n.push(f)}}}i.table.setData(n)}else{i.back.setText("< choose country"),i.back.addEventListener("singletap",function(){e()}),Alloy.Globals.Location="region",Alloy.Globals.newloc="usa";var y=t(json,"region");Ti.API.info(y);for(var s=y.length,l=0;s>l;l++){var h=json[l].region;if(h){a++;var _=a%2?"#f4f6f5":"#ffffff",f=Ti.UI.createTableViewRow({backgroundColor:_,width:Ti.UI.FILL});i.addClass(f,"countryRow");var p=Ti.UI.createView({layout:"horizontal",left:"10%",width:"90%"}),g=Ti.UI.createLabel({text:a});i.addClass(g,"countRow"),f.add(g);var w=Ti.UI.createLabel({text:y[l]});i.addClass(w,"countryList"),p.add(w),f.add(p),n.push(f)}}i.table.setData(n),i.table.scrollToTop()}else{i.back.setText(""),Alloy.Globals.Location="country",Alloy.Globals.newloc="country";for(var y=t(json),s=y.length,l=0;s>l;l++){a++;var _=a%2?"#f4f4f4":"#ffffff",f=Ti.UI.createTableViewRow({backgroundColor:_,width:Ti.UI.FILL});i.addClass(f,"countryRow");var p=Ti.UI.createView({layout:"horizontal",left:"10%",width:"90%"}),g=Ti.UI.createLabel({text:a});i.addClass(g,"countRow"),f.add(g);var w=Ti.UI.createLabel({text:y[l]});i.addClass(w,"countryList"),p.add(w),f.add(p),n.push(f)}i.table.setData(n),i.table.add(Ti.UI.createView({top:0,height:1,backgroundColor:"#cacbca"}))}},onerror:function(e){Ti.API.info(e.error),alert("Please Try Again")},timeout:5e3});s.open("GET",a),s.send()}function t(e,t){var i=[];if(t){for(var o=0;o<e.length;o++)""!=e[o].region&&i.push(e[o].region);return i=_.uniq(i,!1),i.sort(),i}for(var o=0;o<e.length;o++)i.push(e[o].country);return i=_.uniq(i,!1),i.sort(),i.unshift("USA","United Kingdom"),i}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="lotteries",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var i=this,o={};i.__views.settings=Ti.UI.createWindow({backgroundColor:"#fff",id:"settings"}),i.__views.settings&&i.addTopLevelView(i.__views.settings),i.__views.heading=Ti.UI.createView({id:"heading"}),i.__views.settings.add(i.__views.heading),i.__views.__alloyId0=Ti.UI.createLabel({font:{fontFamily:"icomoon",fontSize:70},color:"#999",left:"8%",top:"30%",text:"",id:"__alloyId0"}),i.__views.heading.add(i.__views.__alloyId0),i.__views.__alloyId1=Ti.UI.createLabel({color:"#777",left:"35%",top:"31%",font:{fontSize:16},text:"Choose Your Lottery",id:"__alloyId1"}),i.__views.heading.add(i.__views.__alloyId1),i.__views.__alloyId2=Ti.UI.createLabel({left:"35%",top:"36%",color:"#999",width:"60%",font:{fontSize:11},text:"Pick balls based on your local lottery's rules.",id:"__alloyId2"}),i.__views.heading.add(i.__views.__alloyId2),i.__views.tableStyle=Ti.UI.createView({id:"tableStyle"}),i.__views.settings.add(i.__views.tableStyle),i.__views.back=Ti.UI.createLabel({color:"#949fab",left:"3%",top:"45%",width:"100%",font:{fontSize:12},id:"back"}),i.__views.tableStyle.add(i.__views.back),i.__views.table=Ti.UI.createTableView({backgroundColor:"#FDFFFE",top:"50%",separatorStyle:"none",separatorColor:"transparent",id:"table"}),i.__views.tableStyle.add(i.__views.table),i.__views.nav=Ti.UI.createView({backgroundColor:"#5d9d74",height:"13%",width:"100%",top:0,id:"nav"}),i.__views.settings.add(i.__views.nav),i.__views.cancel=Ti.UI.createLabel({font:{fontFamily:"Lucida-neueu",fontSize:12},color:"#fff",left:20,top:"55%",text:"cancel",id:"cancel"}),i.__views.nav.add(i.__views.cancel),i.__views.hamburgerTap=Ti.UI.createView({left:0,top:"45%",width:"33%",id:"hamburgerTap"}),i.__views.nav.add(i.__views.hamburgerTap),i.__views.navTitle=Ti.UI.createLabel({color:"#e0ebd8",font:{fontFamily:"Lucida-neueu",fontSize:18},top:"50%",text:"Choose Lottery",id:"navTitle"}),i.__views.nav.add(i.__views.navTitle),i.__views.done=Ti.UI.createLabel({font:{fontFamily:"Lucida-neueu",fontSize:12},color:"#fff",right:20,top:"55%",text:"done",id:"done"}),i.__views.nav.add(i.__views.done),i.__views.friesTap=Ti.UI.createView({right:0,top:"45%",width:"33%",id:"friesTap"}),i.__views.nav.add(i.__views.friesTap),i.__views.footer=Ti.UI.createView({top:"13%",backgroundColor:"#dfecd8",width:"100%",height:"51",id:"footer"}),i.__views.settings.add(i.__views.footer),i.__views.refresh_configure=Ti.UI.createLabel({font:{fontFamily:"icomoon",fontSize:15},color:"#5d6a63",left:"9%",top:"35%",text:"",id:"refresh_configure"}),i.__views.footer.add(i.__views.refresh_configure),i.__views.footerTitle=Ti.UI.createLabel({color:"#5d6a63",font:{fontFamily:"Lucida-neueu",fontSize:12},top:"35%",left:"16%",text:"Create a custom lottery >",id:"footerTitle"}),i.__views.footer.add(i.__views.footerTitle),i.__views.sep=Ti.UI.createView({bottom:"0",width:"100%",id:"sep",height:"1",backgroundColor:"#cacbca"}),i.__views.footer.add(i.__views.sep),o.destroy=function(){},_.extend(i,i.__views),i.friesTap.addEventListener("singletap",function(){i.settings.close()}),i.hamburgerTap.addEventListener("singletap",function(){i.settings.close()}),i.footer.addEventListener("singletap",function(){e()}),i.table.addEventListener("click",function(t){if(t.rowData.backgroundColor="#949fab","country"==Alloy.Globals.Location){var o=t.rowData.children[1].children[0].text;e(o),Alloy.Globals.Location="country"}else if("region"==Alloy.Globals.Location){var r=t.rowData.children[1].children[0].text;e("USA",r)}else if("lottery"==Alloy.Globals.Location){var n=t.rowData.children[1].children[0].layout,a="([0-9]*)x([0-9]*).([0-9]*)x([0-9]*)",s=n.match(a);Alloy.Globals.numWhiteBalls=s[1],Alloy.Globals.numWhiteMax=s[2],Alloy.Globals.powerBall=s[3],Alloy.Globals.numPowerMax=s[4],Alloy.Globals.navTitle.setText(t.rowData.children[1].children[0].text),Alloy.Globals.navTitle.setFont(t.rowData.children[1].children[0].text.length>16?{fontSize:12}:{fontSize:18}),Alloy.Globals.numbers.getPicks(Alloy.Globals.numWhiteBalls,Alloy.Globals.numWhiteMax,Alloy.Globals.numRows,Alloy.Globals.powerBall,Alloy.Globals.numPowerMax),i.settings.close()}setTimeout(function(){t.rowData.backgroundColor="transparent"},500)}),i.footer.addEventListener("singletap",function(){Alloy.createController("settings").getView().open(),i.settings.close()}),Alloy.Globals.Location?"usa"==Alloy.Globals.newloc?e("USA"):e():e("USA"),_.extend(i,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;