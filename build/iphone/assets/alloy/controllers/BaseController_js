var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._,Controller=function(){function t(){return i.__widgetId?{widgetId:i.__widgetId,name:i.__controllerPath}:i.__controllerPath}var o=[],i=this;this.__iamalloy=!0,_.extend(this,Backbone.Events,{__views:{},__proxyProperties:{},setParent:function(t){var i=o.length;if(i){this.parent=t.__iamalloy?t.parent:t;for(var e=0;i>e;e++)o[e].__iamalloy?o[e].setParent(this.parent):this.parent.add(o[e])}},addTopLevelView:function(t){o.push(t)},addProxyProperty:function(t,o){this.__proxyProperties[t]=o},removeProxyProperty:function(t){delete this.__proxyProperties[t]},getTopLevelViews:function(){return o},getView:function(t){return"undefined"==typeof t||null===t?o[0]:this.__views[t]},removeView:function(t){delete this[t],delete this.__views[t]},getProxyProperty:function(t){return this.__proxyProperties[t]},getViews:function(){return this.__views},destroy:function(){},getViewEx:function(t){var o=t.recurse||!1;if(o){var i=this.getView();return i?i.__iamalloy?i.getViewEx({recurse:!0}):i:null}return this.getView()},getProxyPropertyEx:function(t,o){var i=o.recurse||!1;if(i){var e=this.getProxyProperty(t);return e?e.__iamalloy?e.getProxyProperty(t,{recurse:!0}):e:null}return this.getView(t)},createStyle:function(o){return Alloy.createStyle(t(),o)},UI:{create:function(o,i){return Alloy.UI.create(t(),o,i)}},addClass:function(o,i,e){return Alloy.addClass(t(),o,i,e)},removeClass:function(o,i,e){return Alloy.removeClass(t(),o,i,e)},resetClass:function(o,i,e){return Alloy.resetClass(t(),o,i,e)},updateViews:function(t){var o=this.getViews();return _.isObject(t)&&_.each(_.keys(t),function(i){var e=o[i.substring(1)];0===i.indexOf("#")&&"#"!==i&&_.isObject(e)&&"function"==typeof e.applyProperties&&e.applyProperties(t[i])}),this}})};module.exports=Controller;